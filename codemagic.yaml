workflows:
  maui-build:
    name: Build .NET MAUI (Android + iOS)
    environment:
      vars:
        DOTNET_VERSION: 8.0.100
      xcode: latest
    scripts:
      - name: Install .NET SDK
        script: |
          wget https://dot.net/v1/dotnet-install.sh -O dotnet-install.sh
          chmod +x dotnet-install.sh
          ./dotnet-install.sh --version $DOTNET_VERSION
          export PATH="$PATH:$HOME/.dotnet"
          dotnet --info

      - name: Install MAUI workloads
        script: |
          export PATH="$PATH:$HOME/.dotnet"
          dotnet workload install maui-android
          dotnet workload install maui-ios
          dotnet workload install maui

      - name: Restore dependencies
        script: |
          export PATH="$PATH:$HOME/.dotnet"
          dotnet restore

      - name: Build .NET MAUI app
        script: |
          export PATH="$PATH:$HOME/.dotnet"
          dotnet build SF_Demo/SF_Demo.csproj -c Release -f:net8.0-android

    artifacts:
      - "**/*.apk"
      - "**/*.ipa"
